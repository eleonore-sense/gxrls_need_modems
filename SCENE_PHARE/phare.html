<!DOCTYPE html>
<html>
<!--
    SEA <- FREE -> RIVER
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../style_commun.css">
    <script src="../jquery-3.7.1.min.js"></script>
    <script src="../script_commun.js"></script>


</head>
<body>


    <a href="../CARTO/bigcarto.html" id="bigcarto">retour à la carto -->
    </a>

    <a href="../INVENTAIRE/inventaire.html" id="inventaire" >inventaire
    </a>

  
    <div id="letout">


    <div id="paysage" style="right: 0;">
        <pre ><script>document.include('txt/fond_phare.txt');</script>
        </pre>
    </div>



    <div id="decodeur" style="margin-left: 415px; cursor:pointer;" onclick="fonctionDjinn1()">
      <pre><script>document.include('txt/decodeur_1.txt') ;</script>
      </pre>
    </div>


<!--/////////GOODIES/////////-->
    <div id="phare" style="top: -184px; margin-left: -486px; cursor:pointer;" onclick="fonctionNews()">
        <pre><script>document.include('txt/phare.txt') ;</script>
        </pre>
    </div>
    
    <div style="top: 100px; left: 100px; cursor: pointer;" onclick="fonctionArete()">
        <pre id="arete"><script>document.include('txt/arete.txt') ;</script>
        </pre>
    </div>

    <div style="top: 300px; left: -380px; cursor: pointer;" onclick="fonctionRose()">
        <pre id="rose"><script>document.include('txt/rose.txt') ;</script>
        </pre>
    </div>


<!--///////////////////////PAGE POP UP///////////////////////////////////-->

<!--electronic cafe-->

    <div id="cafe" style="top: -280px;" onclick="fonctionCafe()">
        <pre ><script>document.include('txt/cafe.txt') ;</script>
        </pre>
    </div>

<!--news-->

    <div id="news" class="popup">
        <pre class="pre_popup" ><script>document.include('txt/news.txt')</script></pre>
    </div>


<!--citation rose-->

	<div id="rose_citation" class="popup">
		<pre class="pre_popup" ><script>document.include('txt/rose_citation.txt')</script></pre>
	</div>


<!--poignard-->

	<div id="poignard" class="popup">
		<pre class="pre_popup" ><script>document.include('txt/poignard.txt')</script></pre>
	</div>

<!--dialogue djinn-->

    <div id="dialogue_1" class="popup" style=" display:none;">
        <pre class="pe_popup" style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_1.txt')</script></pre>
        <button id="bouton_1_a" class="bouton_intro" onclick="fonctionDjinn2()" style="width:150px; top:20px;">Tu sors d'où&nbsp;?</button>
        <button id="bouton_1_b" class="bouton_intro" onclick="fonctionDjinn2()" style="width:150px; top:60px;">C'est vrai qu'on y a mis de l'attention</button>
    </div>

    <div id="dialogue_2" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_2.txt')</script></pre>
        <button id="bouton_2_a" class="bouton_intro" onclick="fonctionDjinn3()" style="width: 160px; top:70px; left:-100px;">Dis-m'en plus</button>
        <button id="bouton_2_b" class="bouton_intro" onclick="fonctionDjinn3()" style="width: 160px; top:70px; left:100px;">Tu as quel âge&nbsp;?</button>
    </div>

    <div id="dialogue_3" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_3.txt')</script></pre>
        <button id="bouton_3" class="bouton_intro" onclick="fonctionDjinn4()" style="width: 200px; top:60px;">Tu as l'air de t'y connaître</button>
    </div>

    <div id="dialogue_4" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_4.txt')</script></pre>
        <button id="bouton_4" class="bouton_intro" onclick="fonctionDjinn5()" style="width: 280px; top:33px;">Tu travaillais à l'imprimerie, c'est ça&nbsp;?</button>
    </div>

    <div id="dialogue_5" style=" display:none;">
        <pre style="z-index: 4; background-color: white; "><script>document.include('txt/dialogue_5.txt')</script></pre>
    </div>


<!--///////////////////////FERMER PAGE///////////////////////////////////-->


  		<div id="tout_fermer" style="height:100vh; width: 100vw; z-index: 20; cursor: pointer; transform: translate(-50%, -50%); top: 50%; left: 50%; display: none;" onclick="tout_fermer()"></div>

        <div id="bloqueur" style="height:100vh; width: 100vw; z-index: 22; transform: translate(-50%, -50%); top: 50%; left: 50%; display: none;"></div>


	</div>

	</div>




 
    <script type="text/javascript">


    ///////////////////////ONLOAD////////////////////////////

    if(localStorage.getItem("news") == "ok"){
        document.getElementById("phare").style.cursor= "auto";
    }

    if(localStorage.getItem("rose_citation") == "ok"){
        document.getElementById("rose").style.cursor= "auto";
    }

    if(localStorage.getItem("poignard") == "ok"){
        document.getElementById("etoile").style.cursor= "auto";
    }


    ///////////////////////POP UP///////////////////////////////////


    function fonctionNews(){
        if(localStorage.getItem("news") == "ok"){   
        }else{
            $("#news").css('display','block');
            $("#tout_fermer").css('display','block');
            $("#phare").css('cursor', 'auto');
            localStorage.setItem("news", "ok"); 
        }
        }

    function fonctionRose(){
    	if(localStorage.getItem("rose_citation") == "ok"){   
    	}else{
            $("#rose_citation").css('display','block');
            $("#tout_fermer").css('display','block');
            $("#rose").css('cursor', 'auto');
            localStorage.setItem("rose_citation", "ok"); 
     	}
 		}

 	function fonctionPoignard(){
    	if(localStorage.getItem("poignard") == "ok"){   
     	}else{
            $("#poignard").css('display','block');
            $("#tout_fermer").css('display','block');
            $("#etoile").css('cursor', 'auto');
            localStorage.setItem("poignard", "ok"); 
     		}
 		}


    function fonctionDjinn1(){
        if(localStorage.getItem("intro_djinn") == "ok"){
            document.getElementById("dialogue_5").style.display= "block";
            document.getElementById("tout_fermer").style.display = "block";
        }else{
            document.getElementById("dialogue_1").style.display= "block";
            document.getElementById("bouton_1_a").style.display= "block";
            document.getElementById("bouton_1_b").style.display= "block";
        }
    }

    function fonctionDjinn2(){
        document.getElementById("dialogue_2").style.display= "block";   
        document.getElementById("bouton_2_a").style.display= "block";
        document.getElementById("bouton_2_b").style.display= "block";
        document.getElementById("bouton_1_a").style.display= "none";
        document.getElementById("bouton_1_b").style.display= "none";
        document.getElementById("dialogue_1").style.display= "none";
        document.getElementById("bloqueur").style.display = "block";
    }

    function fonctionDjinn3(){
        document.getElementById("dialogue_3").style.display= "block";   
        document.getElementById("bouton_3").style.display= "block";
        document.getElementById("bouton_2_a").style.display= "none";
        document.getElementById("bouton_2_b").style.display= "none";
        document.getElementById("dialogue_2").style.display= "none";
    }

    function fonctionDjinn4(){
        document.getElementById("dialogue_4").style.display= "block";   
        document.getElementById("bouton_4").style.display= "block";
        document.getElementById("bouton_3").style.display= "none";
        document.getElementById("dialogue_3").style.display= "none";
    }

    function fonctionDjinn5(){
        document.getElementById("dialogue_5").style.display= "block";   
        document.getElementById("bouton_4").style.display= "none";
        document.getElementById("dialogue_4").style.display= "none";
        document.getElementById("tout_fermer").style.display= "block";
        document.getElementById("bloqueur").style.display = "none";
        localStorage.setItem("intro_djinn", "ok"); 
    }


    function tout_fermer(){
        $("#tout_fermer").css('display', 'none');
        $(".popup").css('display', 'none');
        $("#dialogue_5").css('display', 'none');
    }


    ///////////////////////fontaine///////////////////////////////////
	var text_fontaine = [
		'txt/fontaine1.txt',
		'txt/fontaine2.txt',
	    'txt/fontaine3.txt',
	    'txt/fontaine4.txt',
	    'txt/fontaine5.txt',
		'txt/fontaine6.txt',
	    'txt/fontaine1.txt',
	    'txt/fontaine2.txt',
	    'txt/fontaine3.txt',
		'txt/fontaine4.txt',
	    'txt/fontaine5.txt',
	    'txt/fontaine6.txt',
	    'txt/fontaine1.txt',
	    'txt/fontaine2.txt',
	    'txt/fontaine3.txt',
		'txt/fontaine4.txt',
	    'txt/fontaine5.txt',
	    'txt/fontaine6.txt'
	];

	var counter_fontaine = 0;
	var preElement_fontaine = document.getElementById("fontaine");
	var textContents_fontaine = [];
	var timer_fontaine;

	// Preload all the text files using AJAX
	for (var i = 0; i < text_fontaine.length; i++) {
	    preloadText_fontaine(text_fontaine[i], i);
	}

	// Function to preload a text file and store its content
	function preloadText_fontaine(url, index) {
	    var request_fontaine = new XMLHttpRequest();
	    request_fontaine.open('GET', url, true);
	    request_fontaine.onreadystatechange = function () {
	        if (request_fontaine.readyState === XMLHttpRequest.DONE && request_fontaine.status === 200) {
	            textContents_fontaine[index] = request_fontaine.responseText;
	        }
	    };
	    request_fontaine.send();
	}

	function animate_fontaine() {
	    if (counter_fontaine < text_fontaine.length) {
	        preElement_fontaine.textContent = textContents_fontaine[counter_fontaine];
	        counter_fontaine++;
	        timer_fontaine = setTimeout(animate_fontaine, 50);
	    } else {
	        // Reset the animation to the initial state
	        counter_fontaine = 0;
	        preElement_fontaine.textContent = textContents_fontaine[counter_fontaine];
	    }
	}


    </script>




</body>
</html>
