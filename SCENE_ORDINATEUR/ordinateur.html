<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../style_commun.css">
         <script src="../jquery-3.7.1.min.js"></script>
         <script src="../script_commun.js"></script>




    <style>


#telephone{
    animation-duration: 20s;
    animation-iteration-count: infinite;
    animation-delay: 5s;
}


#bipbip{
    animation: 20s infinite;
    animation-delay: 5s;
    opacity: 0;
}


.bouton_intro{
    z-index: 25;
    transform: translate(-50%, -50%);
    position: absolute;
    cursor: pointer;
    display: none;
    margin-top: 40px;
}

.txt_anime { 
    visibility:hidden;
}

.txt_anime_2 { 
    visibility:hidden;
}


.dans_lecran{
width: 681px;
margin-left: -113px;
transform: translate(-50%, -50%);

}


.terminal {
display: none;
  color:black;
  font-size:13px;
  border: none;
  z-index: 15;
  position: absolute;
  width: 681px;
  height: 401px;
transform: translate(-50%, -50%);
resize: none;
}

.terminal2 {
display: none;
  color:black;
  font-size:13px;
  border: none;
  z-index: 15;
  position: absolute;
  width: 681px;
  height: 401px;
transform: translate(-50%, -50%);
resize: none;
background-color: white;
}

.centre_ordi{
      margin-top: -97px ;
margin-left: -113px;
}


.fond_bureau{
    display: none;
}

.nom_jeuvideo{
    display: none;
    z-index: 22;
    cursor: pointer;
    margin-top:-275px;
    font-size: 12px;
}


.jeu_video{
    z-index:22;
margin-left: -106px;
margin-top: -95px;
    font-size: 12px;

}

textarea:focus{
outline: none;
}


    </style>

</head>
<body>



<!--    ////////////////////////CONSTANT////////////////////   -->
  
          <a href="../SCENE_SALLE_DES_ORDIS/salle_des_ordis.html" id="bigcarto" >
retour à la salle des ordinateurs -->
  </a>

          <a href="../INVENTAIRE/inventaire.html" id="inventaire" >
inventaire
  </a>


  <div id="letout">

    <div id="paysage">
        <pre style=""><script>document.include('txt/fond_ordinateur_tour.txt');</script>
        </pre>
    </div>

    <!-- ouvrir ordi -->

    <div id="hello_world" style="left:-106px; top:-104px;">
        <pre id="hello_world_0" style="font-size:10px;"></pre>
        <pre id="hello_world_1" style=" display: none;"><script>document.include('txt/hello_world_2.txt');</script></pre>
        <pre id="hello_world_2" style=" font-size:11px; display: none;"><script>document.include('txt/hello_world_3.txt');</script></pre>
        <pre id="hello_world_3" style="font-size:10px; display: none;"><script>document.include('txt/hello_world_4.txt');</script></pre>
    </div>    

      <!-- intro -->
<div id="terminal_boite">
 <textarea class="terminal centre_ordi" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="terminal" cols="100" rows="100"></textarea></div>

      <!-- intro -->
<div id="terminal2_boite">
 <textarea class="terminal2 centre_ordi" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="terminal2" cols="100" rows="100"></textarea></div>
      <!-- fichier -->

    <div id="active_fichier" class="fond_bureau"style="top: -256px; left: -424px; cursor: pointer;" onclick="fonctionActiveFichier()">
        <pre style=""><script>document.include('txt/active_fichier.txt');</script></pre>
    </div>


      <!-- maison -->

    <div id="active_maison" class="fond_bureau" style="top: -264px; left: -341px; cursor: pointer;" onclick="fonctionActiveMaison()">
        <pre style=""><script>document.include('txt/active_maison.txt');</script></pre>
    </div>



      <!-- poubelle -->

    <div id="active_poubelle" class="fond_bureau" style="top: 44px; left: 188px; cursor: pointer;" onclick="fonctionActivePoubelle()">
        <pre style=""><script>document.include('txt/active_poubelle.txt');</script></pre>
    </div>


      <!-- jeu -->

    <div id="active_jeu" class="fond_bureau" style="top: -264px; left: -252px; cursor: pointer;" onclick="fonctionActiveJeu()">
        <pre style=""><script>document.include('txt/active_jeu.txt');</script></pre>
    </div>
      <!-- ouvre disque -->

    <div id="ouvre_disque" style="top: -186px; left: 321px; width:231px; height: 54px; cursor: pointer;" onclick="fonctionLadyGaga()">
    </div>


  <!--    ////////////////////////LES POP PAGES////////////////////   -->


      <!-- CD lady gaga-->


    <div id="cd_lady_gaga" class="popup" >
        <pre class="pre_popup"><script>document.include('txt/cd_lady_gaga.txt');</script></pre>
    </div>





      <!-- MDP-->


    <div id="popup_mdp" class="popup centre_ordi" style="display: none; z-index: 21;">
        <pre style=" background-color: white; margin: 7px;"><script>document.include('txt/popup_mdp.txt');</script></pre>
     <div id="le_mdp" class="centre_ecran" style="display: flex; margin-top:30px; transform:translate(-50%,-50%); position: absolute; ">
        <input type="text" id="mdp" style=" margin-right: 30px;"/>
        <button id="donner_mdp" style="cursor: pointer;" onclick="fonctionMdp()">Soumettre</button>

    </div>        
    <div id="faux_mdp" style="transform:translate(-50%,-50%); width: 400px; text-align: center; margin-top: 66px; display: none; "><p>/!\ le mot de passe est incorrect. veuillez réessayer</p></div>
    </div>



      <!-- JEUX VIDEOS-->


    <div id="popup_jeuvideo" class="popup centre_ordi" style="display: none; z-index: 21;  margin-top: -107px;   font-size: 12px;">
        <pre style=" background-color: white; margin: 7px;"><script>document.include('txt/popup_jeuvideo.txt');</script></pre>

    </div>        

    <div id="nom_mewilo" onclick="fonctionMewilo()" class="nom_jeuvideo" style="margin-left: -228px;"> Méwilo</div>
    <div id="nom_adibou" onclick="fonctionAdibou()" class="nom_jeuvideo" style="margin-left: -145px;"> Adibou</div>
    <div id="nom_goblin" onclick="fonctionGoblin()" class="nom_jeuvideo" style="margin-left: -54px;"> Gobliiins</div>

    <div id="mewilo" class="popup jeu_video" style="">
        <pre style=""><script>document.include('txt/martinique.txt');</script></pre>

    </div>     


    <div id="adibou" class="popup jeu_video" style="">
        <pre style=""><script>document.include('txt/adibou.txt');</script></pre>

    </div> 

    <div id="goblin" class="popup jeu_video" style="">
        <pre style=""><script>document.include('txt/goblin.txt');</script></pre>

    </div> 


      <!-- POUBELLE-->


    <div id="susan_kare" class="popup" style="display: none; cursor: pointer;">
        <pre class="pre_popup"><script>document.include('txt/susan_kare.txt');</script></pre>
    </div>


      <!-- GENDER CHANGER-->


    <div id="gender_changer" class="popup" style="display: none; cursor: pointer;">
        <pre class="pre_popup"><script>document.include('txt/gender_changer.txt');</script></pre>
    </div>

<!--///////////////////////FERMER PAGE///////////////////////////////////-->


  <div id="tout_fermer"onclick="tout_fermer()"></div>

    </div>

  <div id="fermer_fenetre" style="height:50px; width: 50px; z-index: 22; cursor: pointer; transform: translate(-50%, -50%);display: none;" onclick="tout_fermer()"></div>

    </div>



    <script type="text/javascript">
 
    const preElement_anim_1 = document.getElementById("hello_world_0");

   ///////////////////////**********///////////////////////////////////
    ///////////////////////ANIMATION///////////////////////////////////
        ///////////////////////******///////////////////////////////////

      $( window ).on( "load", function() {
  if(localStorage.getItem("intro_jean") == "ok"){
 setTimeout(() => {$(".fond_bureau").css('display','block')}, 10000);
}else{

setTimeout(() => {init()}, 10000);
}});   


      $( window ).on( "load", function() {
if(localStorage.getItem("gender_changer") == "ok"){
$('#active_fichier').css('cursor','auto');
}else if(localStorage.getItem("gender_changer") == "donne"){
$('#active_fichier').css('cursor','auto');
} else{
    $('#active_fichier').css('cursor','pointer');
} 
setTimeout(() => {animate_anim_1()}, 1500);

});


  // Fonction pour récupérer le contenu d'un fichier texte en utilisant XMLHttpRequest
    function fetchTextFile(filename) {
        return new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", filename);
            xhr.onload = () => {
                if (xhr.status === 200) {
                    resolve(xhr.responseText);
                } else {
                    reject(Error(xhr.statusText));
                }
            };
            xhr.onerror = () => {
                reject(Error("Network error"));
            };
            xhr.send();
        });
    }




 // Animation intro_1
    function animate_anim_1() {
        const textFiles_anim_1 = [
            'txt/hello_world_0_a.txt',
            'txt/hello_world_0_b.txt',
            'txt/hello_world_0_c.txt',
            'txt/hello_world_0_d.txt',
            'txt/hello_world_0_e.txt',
            'txt/hello_world_0_f.txt',
            'txt/hello_world_0_g.txt',
            'txt/hello_world_0_h.txt',
            'txt/hello_world_0_i.txt',
            'txt/hello_world_0_j.txt',
            'txt/hello_world_0_k.txt',
            'txt/hello_world_0_l.txt',
            'txt/hello_world_0_m.txt',
            'txt/hello_world_0_n.txt',
            'txt/hello_world_0_o.txt',
            'txt/hello_world_0_p.txt'
        ];

        let counter_anim_1 = 0;

        function animate1() {
            if (counter_anim_1 < textFiles_anim_1.length) {
                const filename = textFiles_anim_1[counter_anim_1];
                fetchTextFile(filename)
                    .then((fileContent) => {
                        preElement_anim_1.textContent = fileContent;
                    })
                    .catch((error) => {
                        console.error(error);
                    });
                counter_anim_1++;
                setTimeout(animate1, 50); //intervalle 50 ms
            } else { // Une fois la boucle terminée
                setTimeout(function() {
                    $("#hello_world_0").css("display", "none");
                    $("#hello_world_1").css("display", "block");
                }, 1500); 
                    setTimeout(function() {
                    $("#hello_world_1").css("display", "none");
                    $("#hello_world_2").css("display", "block");
                }, 3000); 
                    setTimeout(function() {
                    $("#hello_world_2").css("display", "none");
                    $("#hello_world_3").css("display", "block");
                }, 5500); 
                    setTimeout(function() {
                    $("#hello_world_3").css("display", "none");
                    $("#hello_world_4").css("display", "block");
                  }, 7000); 
            }
        }

        animate1(); // Appelle la fonction qui anime portail1
    }

////ONLOAD////
if (localStorage.getItem("cd_lady_gaga") == "ok") {
    $("#ouvre_disque").css('cursor', 'auto');
}

if (localStorage.getItem("susan_kare") == "ok") {
    $('#active_poubelle').css('cursor','auto');
}

    ///////////////////////**********///////////////////////////////////
    ///////////////////////FONCTION///////////////////////////////////
        ///////////////////////******///////////////////////////////////


        function tout_fermer(){ 
            $("#cd_lady_gaga").css("display", "none");
            $("#popup_mdp").css("display", "none");
            $(".popup").css("display", "none");
            $("#susan_kare").css("display", "none");
            $("#tout_fermer").css("display", "none");
            $("#fermer_fenetre").css("display", "none");
            $("#popup_jeuvideo").css("display", "none");
            $(".nom_jeuvideo").css("display", "none");
            $(".jeu_video").css("display", "none");
            document.getElementById("mdp").value="";
        }

//////////////////////////CD LADY GAGA//////////////////////////////////////



    function fonctionLadyGaga(){
        if (localStorage.getItem("cd_lady_gaga") == "ok") {
            $("#ouvre_disque").css('cursor', 'auto');
       
        }else{
            $("#cd_lady_gaga").css("display", "block");
            $("#tout_fermer").css("display", "block");
            localStorage.setItem("cd_lady_gaga", "ok");
        }
    }




//////////////////////////MOT DE PASSE//////////////////////////////////////

    function fonctionActiveFichier(){
            if(localStorage.getItem("gender_changer") == "ok"){                
            }else if(localStorage.getItem("gender_changer") == "donne"){
            }else{
            $("#popup_mdp").css("display", "block");
            $("#tout_fermer").css("display", "block");
            $("#fermer_fenetre").css("display", "block");
            $("#fermer_fenetre").css("margin-left", "243px");
            $("#fermer_fenetre").css("margin-top", "-269px");
        }
    }



//////////////////////////JEU VIDEO//////////////////////////////////////

    function fonctionActiveJeu(){

            $("#popup_jeuvideo").css("display", "block");
            $("#nom_mewilo").css("display", "block");
            $("#tout_fermer").css("display", "block");
            $("#nom_adibou").css("display", "block");
            $("#nom_goblin").css("display", "block");
            $("#fermer_fenetre").css("display", "block");
            $("#fermer_fenetre").css("margin-left", "353px");
            $("#fermer_fenetre").css("margin-top", "-524px");
        }
    

    function fonctionMewilo(){
            $(".nom_jeuvideo").css("font-style", "normal");    
            $(".nom_jeuvideo").css("text-decoration", "none");    
            $(".jeu_video").css("display", "none");
            $("#nom_mewilo").css("font-style", "italic");
            $("#nom_mewilo").css("text-decoration", "underline");
            $("#mewilo").css("display", "block");
        }

    function fonctionAdibou(){
            $(".nom_jeuvideo").css("font-style", "normal");    
            $(".nom_jeuvideo").css("text-decoration", "none");    
            $(".jeu_video").css("display", "none");
            $("#nom_adibou").css("font-style", "italic");
            $("#nom_adibou").css("text-decoration", "underline");
            $("#adibou").css("display", "block");
        }

    function fonctionGoblin(){
            $(".nom_jeuvideo").css("font-style", "normal");    
            $(".nom_jeuvideo").css("text-decoration", "none");    
            $(".jeu_video").css("display", "none");
            $("#nom_goblin").css("font-style", "italic");
            $("#nom_goblin").css("text-decoration", "underline");
            $("#goblin").css("display", "block");
        }
    



//////////////////////////FONCTION MDP//////////////////////////////////////

    function fonctionMdp(){

  var x = document.getElementById("mdp").value;
  var mdp = 'eat_code_and_die' ;
        if (localStorage.getItem("gender_changer") == "ok") {
       
        }else if( x==mdp){
            $("#faux_mdp").css('display','none');
            $("#popup_mdp").css("display", "none");
            $("#gender_changer").css("display", "block");
            $("#tout_fermer").css("display", "block");
            $("#active_fichier").css('cursor','auto');
            localStorage.setItem('gender_changer','ok');
        }else{
            $("#faux_mdp").css('display','block');
        }
    }


//////////////////////////FONCTION POUBELLE//////////////////////////////////////

function fonctionActivePoubelle(){
    if (localStorage.getItem("susan_kare") == "ok") {
        $('#active_poubelle').css('cursor','auto');
    }else{
        $("#susan_kare").css('display','block');
        $("#tout_fermer").css("display", "block");
        localStorage.setItem("susan_kare", "ok");   
    }
}





//////////////////////////TEXTE TERMINAL//////////////////////////////////////


    // global vars
let terminal, writeSpeed;


function init() {
  // default settings
  terminal = document.getElementById("terminal");
  $(".terminal").css("display", "block");
  writeSpeed = 60;
  terminal.innerText = "[j.sammet@computing_corporation.a:]$ ";
  terminalStart();

  // input listener
 terminal.addEventListener("keydown", terminalInputHandler);
}

function terminalStart() {
  terminalWrite('\n>> ..............................................................\nLogin as Jean Sammet.............................................\nWelcome to the International Business Machines Corporation.......\nWait for connection..............................................\n.................................................................\nHé ho il y a quelqu’un·e ?.......................................\nOui toi, devant l’ordinateur, c’est à toi que je parle !.........\nTu réalises une quête, c’est bien ça ?...........................\nTape [o] pour répondre [oui]:');
}


function terminalWrite(text) {
  let counter = 0;

  (function writer() {
    terminal.disabled = true;

      var textarea = document.getElementById("terminal");
  if(textarea.selectionStart == textarea.selectionEnd) {
     textarea.scrollTop = textarea.scrollHeight;
  }
  

    if (counter < text.length) {
      let terminalText = (`${(terminal.value).replace("|","")}${text.charAt(counter)}`);
      if (counter !== text.length-1) {
        terminalText = `${terminalText}|`
      }
      terminal.value = terminalText;
      counter++;
      setTimeout(writer, writeSpeed);
    } else {
      clearTimeout(writer);
      terminal.disabled = false;
      terminal.blur();
      terminal.focus();
    }
  })();
}
  let phrase = 0;
function terminalInputHandler(e) {
  console.log(e.keyCode);
  switch (e.keyCode) {
    case 79:
      if(phrase == 0){
        terminalWrite('\n>> ..............................................................\nC’est bien, c’est bien. Beaucoup de gens en parlent par ici,.....\nremarque, c’est aussi que j’en sais des choses...................\nle langage COBOL et FORMAC par exemple...........................\nTu en as déja entendu parler ?...................................\nTape [o] pour répondre [oui] ou [n] pour répondre [non]:');
        phrase = 1;
      }else if(phrase == 1){
        terminalWrite('\n>> ..............................................................\nWhouaou, je suis impressionnée !.................................\nTu es dans la programmation informatique ?.......................\nTu n’as pas l’air si à l’aise devant cet ordinateur..............\nPour avouer que tu as menti, tape [o]:');   
        phrase = 2;


      }else if(phrase ==2){
        terminalWrite('\n>> ..............................................................\nCe sont des langages de programmation............................\net c’est en grande partie moi qui les ai écrits !................\nAvec mes équipes, on a énormément simplifié le langage...........\ncomme ça lorsque l’on code, on fait beaucoup moins de fautes.....\nce qui le rend beaucoup plus accessible !........................\nJ’ai l’impression que ce n’est pas très clair pour toi...........\n.................................................................\nEntre autres, mon travail a permis que tu discutes...............\navec un ordinateur en anglais,...................................\net non plus en formules mathématiques, c’est super non ?.........\nTape [o] pour féliciter j.s et [w] pour demander qui elle est:');
        phrase = 3;        
      }else if(phrase ==3){
        terminalWrite('\n>> ..............................................................\nOhh merci, tu es vraiment un·e correspondant·e sympa !...........\nMoi c’est Jean Sammet, je suis enchantée de te rencontrer !......\nOuiiii, tu as l’impression de parler à un ordinateur.............\nmais c’est avec moi que tu échanges en réalité !.................\nEt c’est un peu grâce à moi aussi................................\nJe reste dans le coin si jamais..................................\nJe pourrai peut-être t’être utile au cours de ta quête...........\nBon courage !....................................................\nTape [q] pour quitter:');



      }
    break;

    case 78:
      if(phrase == 0){
      terminalWrite("\nCommande non prise en charge\ntape [o] pour répondre [oui]:");
      }
      if(phrase == 1){
        terminalWrite('\n>> ..............................................................\nCe sont des langages de programmation............................\net c’est en grande partie moi qui les ai écrits !................\nAvec mes équipes, on a énormément simplifié le langage...........\ncomme ça lorsque l’on code, on fait beaucoup moins de fautes.....\nce qui le rend beaucoup plus accessible !........................\nJ’ai l’impression que ce n’est pas très clair pour toi...........\n.................................................................\nEntre autres, mon travail a permis que tu discutes...............\navec un ordinateur en anglais,...................................\net non plus en formules mathématiques, c’est super non ?.........\nTape [o] pour féliciter j.s et [w] pour demander qui elle est:');
        phrase = 3;  
      }
    break;      
    default:
      e.preventDefault();
      if(phrase == 0){
      terminalWrite("\nCommande non prise en charge\nTape [o] pour répondre [oui]:");
  }else{              
      terminalWrite("\nCommande non prise en charge.....................................\nEn attente d'une entrée valide:");    
  }
     break;
    case 87:
      if(phrase == 3){
        terminalWrite('\n>> ..............................................................\nMoi c’est Jean Sammet, enchantée !...............................\nOuiiii, tu as l’impression de parler à un ordinateur.............\nmais c’est avec moi que tu échanges en réalité !.................\nEt c’est un peu grâce à moi aussi................................\nJe reste dans le coin si jamais..................................\nJe pourrai peut-être t’être utile au cours de ta quête...........\nBon courage !....................................................\nTape [q] pour quitter:');
      }else{
      terminalWrite("\nCommande non prise en charge.....................................\nEn attente d'une entrée valide:");    
      }
    break;

    case 81:
      if(phrase == 3){
$("#terminal").css('display','none');
localStorage.setItem("intro_jean", "ok");   
$(".fond_bureau").css('display','block');
      }else{
      terminalWrite("\nCommande non prise en charge.....................................\nEn attente d’une entrée valide:");    
      }
    break;
  }
}
    














//////////////////////////TEXTE TERMINAL2//////////////////////////////////////
let terminal2, writeSpeed2;
function fonctionActiveMaison() {
    $('#terminal2').css('display','block');
  // default settings
  terminal2 = document.getElementById("terminal2");
  writeSpeed2 = 60;

  terminal2.innerText = "[j.sammet@computing_corporation.a:]$ ";

  terminal2Start();

  // input listener
  terminal2.addEventListener("keydown", terminal2InputHandler);
}

function terminal2Start() {
  let x = Math.floor((Math.random() * 2));
  let text1 = '\n>> ..............................................................\nTe voilà de retour !.............................................\nLa quête avance bien ?...........................................\nDis-moi, je peux te demander un petit service ?..................\nJ’ai un fichier important sur le bureau..........................\nque je n’arrive plus à lire......................................\nJ’ai égaré le mot de passe qui le protège........................\nComme tu es un·e aventurier·e qui voyage pas mal,................\nje me suis dit que tu pourrais peut-être.........................\ninspecter un peu partout pour m’aider à le retrouver ?...........\nJe l’aurais fait moi-même, mais, vois-tu,........................\nje ne suis qu’un simple fantôme qui hante cette machine..........\nTape [q] pour [quitter]:';

let text2 = '\n>> ..............................................................\nSalut salut !....................................................\nJe ne sais pas pourquoi mais j’ai une chanson....................\nque je n’arrive pas à me sortir de la tête.......................\nIl y a peut-être quelque chose qui traîne dans le lecteur CD.....\nTape [q] pour [quitter]:';
if (x==1){
  terminal2Write(text1);
}else{
  terminal2Write(text2);    
}
}


function terminal2Write(text) {
  let counter = 0;
  (function writer() {
    terminal2.disabled = true;
      var textarea = document.getElementById("terminal2");
  if(textarea.selectionStart == textarea.selectionEnd) {
     textarea.scrollTop = textarea.scrollHeight;
  }
  
    if (counter < text.length) {
      let terminalText = (`${(terminal2.value).replace("|","")}${text.charAt(counter)}`);
      if (counter !== text.length-1) {
        terminalText = `${terminalText}|`
      }
      terminal2.value = terminalText;
      counter++;
      setTimeout(writer, writeSpeed2);
    } else {
      clearTimeout(writer);
      terminal2.disabled = false;
      terminal2.blur();
      terminal2.focus();
    }
  })();
}

function terminal2InputHandler(e) {
  console.log(e.keyCode);
  switch (e.keyCode) {
    case 81:
terminal2.value = "";
$('#terminal2').css('display','none');

      break;

    default:
      e.preventDefault();
      terminalWrite("\nCommande non prise en charge.....................................\nEn attente d'une entrée valide:");
  }
}
    
</script>

</body>
</html>
